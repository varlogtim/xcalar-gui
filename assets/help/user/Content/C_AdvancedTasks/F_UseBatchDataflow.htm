<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Advanced tasks">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Using batch dataflows</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <link href="../Fonts/open-sans.regular.ttf" rel="stylesheet" />
        <link href="../Fonts/OpenSans-Semibold.ttf" rel="stylesheet" />
        <link href="../Fonts/OpenSans-Light.ttf" rel="stylesheet" />
        <link href="../Fonts/OpenSans-Bold.ttf" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.topic-ratings-button
{
	-pie-background: transparent url('../../Skins/Default/Stylesheets/Images/star-full.png') no-repeat center center;
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.edit-user-profile-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/edit-profile.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="relative clearfix"><a class="logo" href="../Home.htm" alt="Logo"></a>
                                    <div class="navigation-wrapper nocontent">
                                        <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                            <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="nav-search row outer-row">
                                <form class="search" action="#">
                                    <div class="search-bar search-bar-container needs-pie">
                                        <input class="search-field needs-pie" type="search" placeholder="Search" />
                                        <div class="search-filter-wrapper">
                                            <div class="search-filter">
                                                <div class="search-filter-content">
                                                    <ul>
                                                        <li>All Files</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="search-submit-wrapper" dir="ltr">
                                            <div class="search-submit" title="Search">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <div id="contentBody">
                                <div class="row collapse">
                                    <div class="sideContent">
                                        <div class="clearfix">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <div class="button-group star-buttons loading feedback-topic-required">
                                                        <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                            <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                        </div>
                                                        <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                            <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                        </div>
                                                        <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                            <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                        </div>
                                                        <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                            <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                        </div>
                                                        <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                            <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                        </div>
                                                    </div>
                                                    <div class="button-separator">
                                                    </div>
                                                    <button class="button feedback-required login-button" id="normalLoginBtn" data-state1-class="login-button" data-state2-class="edit-user-profile-button" title="Login" data-state1-title="Login">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="login" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Print">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/XD_help.js" data-mc-side-menu="True" data-mc-max-depth="-1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        </ul>
                                    </div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div class="bodyProxyNarrow">
                                        <h1>Using batch dataflows</h1>
                                        <p>This section describes tasks related to batch dataflows except the task of scheduling, which is described in <a href="F1_ScheduleBatchDataflow.htm" class="MCXref xref">Scheduling batch dataflows</a>.</p>
                                        <h2>Displaying batch dataflows</h2>
                                        <p>Follow these steps to display batch dataflows:</p>
                                        <ol>
                                            <li value="1">Click <img src="../Resources/Images/XD_assets/xd-batch-dataflow-list-icon.png" /> to display a list of batch dataflows. All batch dataflows, including the ones created by other users, are displayed.</li>
                                            <li value="2">Click the name of the batch dataflow in the list to display the dataflow graph.</li>
                                        </ol>
                                        <h2><a name="Result"></a>Result of running a batch dataflow</h2>
                                        <p>The icon shown at the end of a batch dataflow graph represents the final result created when you run the batch dataflow. The exact result  depends on your selection under <span class="UIelement">Advanced Export Options</span> in the graph before you run the batch dataflow:</p>
                                        <ul>
                                            <li value="1">
                                                <p><span class="UIelement">Export to file system</span> (not supported in <span class="GeneralProductTrialVersion">Xcalar Cloud Preview</span>):&#160;By default, the table is exported to a csv file at the default export target.  You cannot export the result of a batch dataflow to a user-defined export target. For more information about the meaning of an export target, see <a href="G_ExportTable.htm" class="MCXref xref">Exporting a table</a>. </p>
                                                <p>The name of the export file must not be a duplicate. For example, if running the batch dataflow for the first time creates a file named export-airlines1#L811.csv, make sure that you change the name of the export file when you run the batch dataflow subsequently. Otherwise, your attempt to run the batch dataflow results in the following error message:</p>
                                                <p class="CLIoutput">Export file already exists.</p>
                                            </li>
                                            <li value="2">
                                                <p><span class="UIelement">Export to a Xcalar table</span>:&#160;This option exports the table created by the dataflow to another table that will be placed in your active worksheet. You must provide the exported table with a name that does not conflict with any existing table name.</p>
                                            </li>
                                        </ul>
                                        <div class="Note"><span class="label">NOTE</span>:&#160;You can export the result of a batch dataflow as a table only if you run it from the dataflow graph. If you run it according to a schedule, the batch dataflow always exports the result as a file. </div>
                                        <h2>Understanding tables exported from batch dataflows</h2>
                                        <p>The table exported to the worksheet from a batch dataflow works in the same way as any other table. It has its own dataflow graph. However, some differences exist between the table created through a batch dataflow and other tables as described below:</p>
                                        <ul>
                                            <li value="1">You cannot create another batch dataflow from the dataflow graph associated with this table.</li>
                                            <li value="2">All columns are derived columns. Column names do not have a prefix.</li>
                                            <li value="3">You cannot trace the lineage of the data in this table. For example, you cannot determine the source of the data in or whether the data type of a column has been changed.</li>
                                        </ul>
                                        <h2>Specifying the name of the export file created by a batch dataflow</h2>
                                        <p>To export the result of a batch dataflow to a file, follow these steps to specify the name of the export file:</p>
                                        <ol>
                                            <li value="1">Click the last icon in the batch dataflow graph. Then click <span class="UIelement">Create  parameterized operation</span> in the pop-up menu.</li>
                                            <li value="2">
                                                <p>In the <span class="UIelement">Parameterize Operation</span> modal window, enter the export file name as shown in the following screenshot, then click <span class="UIelement">SAVE</span>. You must include an extension such as .csv in the name. This file will be created in the default export target.</p>
                                                <p>In the dataflow graph, the border for the batch dataflow result icon changes to green to indicate that the default name has been replaced by a user-specified name. </p>
                                                <p>You can type the name of the export file as shown in the screenshot. Alternatively, you can parameterize the file name. For more information about parameterization, see <a href="H_Parameterization.htm" class="MCXref xref">Parameterizing operations</a>.</p>
                                                <div class="Note"><span class="label">IMPORTANT</span>:&#160;If you choose to parameterize the export file name, be sure to use a parameter created by you. Do not use the <span class="UIelement">N</span> parameter, which is a system parameter reserved for scheduled batch dataflows. If the export file name contains this system parameter, running the batch dataflow manually fails with an error message.</div>
                                            </li>
                                        </ol>
                                        <p>
                                            <img src="../Resources/Images/XD_screenshots/export-file-name-for-batch-dataflow_830x513.png" style="width: 830;height: 513;" />
                                        </p>
                                        <h2>Running a batch dataflow</h2>
                                        <p>Follow these steps to run a batch dataflow:</p>
                                        <ol>
                                            <li value="1">
                                                <p>In the batch dataflow graph, click <span class="UIelement">Advanced Export Options</span> to specify the name of the file system or table to which the result of the batch dataflow is exported. (If none is specified, a default name is provided.)</p>
                                                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="17" alt="Closed" data-mc-alt2="Open" />The following list describes the naming conventions:</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ul>
                                                            <li value="1"> Characters can be A-Z, a-z, 0-9, hyphen (-), underscore (_), and space.</li>
                                                            <li value="2">First character must be a letter.</li>
                                                            <li value="3">The name is case-sensitive. </li>
                                                            <li value="4">Length can be from 1 to 255 characters.</li>
                                                            <li value="5">The name must not be a duplicate of an existing table name in the same workbook.</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </li>
                                            <li value="2">
                                                <p>Click <img src="../Resources/Images/XD_assets/xd-run-batch-dataflow.png" /> to run the batch dataflow. When the batch dataflow is in progress, the <img src="../Resources/Images/XD_assets/xd-run-batch-dataflow.png" /> icon turns into a spinner. You can click the spinner to terminate the execution of the batch dataflow. </p>
                                                <p>The icons in the batch dataflow change colors when the dataflow is being run. When <span class="GeneralProductName3short">XDP</span> is in the process of creating a table, the table icon turns yellow; after the table is created, the icon turns green. If the final table or file cannot be created, its icon is displayed in red.</p>
                                            </li>
                                        </ol>
                                        <p>The following screenshot shows an example of a batch dataflow.</p>
                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/XD_screenshots/batch-dataflow-graph-example.png"><img class="MCPopupThumbnail img imgBigImage" data-mc-width="1356" data-mc-height="366" src="../Resources/Images/XD_screenshots/batch-dataflow-graph-example_thumb_0_150.png" tabindex="" /></a>
                                        </p>
                                        <p>You can also run a batch dataflow according to a pre-defined a schedule. For information about scheduling a batch dataflow, see <a href="F1_ScheduleBatchDataflow.htm#Creating" class="MCXref xref">Scheduling batch dataflows</a>.</p>
                                        <h2>Downloading and uploading a batch dataflow</h2>
                                        <p>You can download a batch dataflow as a .tar.gz file to your computer where the browser with <span class="GeneralProductName">Xcalar Design</span> is running. The download location is determined by a browser setting. For example, in your Chrome browser, display the advanced settings and then go to the Downloads section to specify a path for storing all downloaded files. </p>
                                        <p>The downloaded batch dataflow is called a dataflow file. After you create a dataflow file, you can upload it to any <span class="GeneralProductName2short">XCE</span> cluster. </p>
                                        <h3>Downloading</h3>
                                        <p>To download a batch dataflow, click <img src="../Resources/Images/XD_assets/xd-download-batch-dataflow.png" /> for the selected batch dataflow in the batch dataflow list. </p>
                                        <p>The following screenshot shows the icons for downloading and uploading batch dataflows.</p>
                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/XD_screenshots/download-upload-dataflow.png"><img class="MCPopupThumbnail img imgBigImage" data-mc-width="1586" data-mc-height="610" src="../Resources/Images/XD_screenshots/download-upload-dataflow_thumb_0_150.png" tabindex="" /></a>
                                        </p>
                                        <h3>Uploading</h3>
                                        <p>You can upload a batch dataflow that was downloaded from the same <span class="GeneralProductName2short">XCE</span> cluster or any other <span class="GeneralProductName2short">XCE</span> cluster. If the dataflow file has a UDF&#160;associated with it (for example, a UDF is used in one of the operations in the dataflow), the UDFs of the cluster are affected in one of the following ways:</p>
                                        <ul>
                                            <li value="1">If the module name of the UDF does not conflict with any module name on the cluster, the module containing the UDF is uploaded to the cluster as well. For example, if the dataflow file uses the UDF&#160;named calendar:getWeekday, the calendar module is added to your cluster when you upload the dataflow file.</li>
                                            <li value="2">
                                                <p>If the module name of the UDF conflicts with a module name on the cluster, what happens depends on whether you choose to overwrite the module on the cluster with the module in the dataflow file:</p>
                                                <ul>
                                                    <li value="1">If you choose to overwrite the module on the cluster, all contents of the module on the cluster are replaced by the contents of the module in the dataflow file. For example, if the dataflow file uses the UDF&#160;named calendar:getWeekday, the module named calendar on the cluster is overwritten by the module from the dataflow file.</li>
                                                    <li value="2">
                                                        <p>If you do not choose to overwrite the module on the cluster, the same function on the cluster is used when you run the dataflow from the dataflow file. If the function by the same name does not exist in the module, the attempt to run the dataflow fails.</p>
                                                        <p>For example, if the dataflow file uses the UDF&#160;named calendar:getWeekday and the cluster also has a UDF by the same name, the calendar:getWeekday UDF on the cluster is invoked when you run the dataflow from the dataflow file. However, if the calendar module on the cluster does not contain a getWeekday function, you cannot run the dataflow. You must copy the function to the module on the cluster before trying to run the dataflow again.</p>
                                                    </li>
                                                </ul>
                                                <div class="Note"><span class="label">IMPORTANT:</span>&#160;You cannot revert a module after it is overwritten by a dataflow file upload. Enable the overwriting only after you verify that you no longer need the contents of the existing module that has the same name as that in the dataflow file. </div>
                                            </li>
                                        </ul>
                                        <p>To upload a dataflow file, follow these steps:</p>
                                        <ol>
                                            <li value="1">Click the icon for uploading a dataflow file.</li>
                                            <li value="2">In the <span class="UIelement">Upload Dataflow</span> window, specify the following information:<ul><li value="1">The location of the dataflow file, which must be in the .tar.gz format. You can click <span class="UIelement">BROWSE</span>&#160;to navigate to the location and select the file.</li><li value="2">Name of the dataflow if you want to change the name.</li><li value="3"><p>Whether the UDFs in the dataflow file will overwrite the ones that exist on the cluster if these UDFs have the same module name. </p></li></ul></li>
                                            <li value="3">Click <span class="UIelement">UPLOAD</span>.</li>
                                        </ol>
                                    </div>
                                    <p><a href="#Top">Go to top</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>