<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Running a SQL snippet using a SQL Node</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlobal.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapUtilities.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapXhr.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTextEffects.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSlideshow.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedback.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDefault.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAccessibility.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapHelpSystem.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.MiniToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.SideMenu.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapIndex.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlossary.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapParser.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopic.js" defer="defer">
        </script>
        <script src="../../../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 800px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Home_cloud.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <main id="main" class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="content">
                                        <p><a name="top"></a>
                                        </p>
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="sideContent">
                                                    <div class="clearfix">
                                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                            <div class="button-group-container-left">
                                                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                    <img alt="Navigate previous" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                    <img alt="Navigate next" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <div class="button-separator">
                                                                </div>
                                                                <button class="button needs-pie print-button" title="Print">
                                                                    <img alt="Print" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                    </div>
                                                </div>
                                                <h1>Running a SQL snippet using a SQL Node</h1>
                                                <p>A <span class="UIelement">SQL</span> Node enables you to add a SQL snippet in your dataflow. It uses the output of the parent Nodes as input tables for the SQL snippet and generates a result set as output on execution. </p>
                                                <p>To use a <span class="UIelement">SQL </span>Node, verify that you are in <span class="UIelement">Dataflow Mode</span>. If not, from the top menu bar of <span class="GeneralGUIName1">Xcalar Design</span>, click the mode switch to display the <span class="UIelement">Dataflow Mode</span> workspace. From the  sidebar, click the <span class="UIelement">Dataflow Panel</span> icon. The <span class="UIelement">Dataflow Mode</span> workspace opens.</p>
                                                <h2 class="noPageBreak">Using the SQL Node</h2>
                                                <p>To use a <span class="UIelement">SQL</span> Node in a dataflow:</p>
                                                <ol>
                                                    <li value="1">Click the <span class="UIelement">SQL</span> category of operations in the Dataflow Mode toolbar to display the <span class="UIelement">SQL</span> Node. </li>
                                                    <li value="2">Drag the <span class="UIelement">SQL</span> Node to the dataflow canvas. </li>
                                                    <li value="3">
                                                        <p>Locate an existing Node with a result set that you want to use as input in the SQL Node snippet, and connect the Node's output to the <span class="UIelement">SQL</span> Node.</p>
                                                        <p>Each input connection line of a <span class="UIelement">SQL</span> Node displays a number. For example, the first connection displays #1, the second connection displays #2 and so on.</p>
                                                    </li>
                                                    <li value="4">(Optional) Repeat the previous step to add as many input tables to the <span class="UIelement">SQL </span>Node as required by the SQL snippet.</li>
                                                    <li value="5">
                                                        <p>Right click the <span class="UIelement">SQL</span> Node and select <span class="UIelement">Configure</span>. </p>
                                                        <p>The <span class="UIelement">SQL</span> configuration panel is displayed.</p>
                                                    </li>
                                                    <li value="6">The <span class="UIelement">Table Mapping</span> section in the <span class="UIelement">SQL </span>panel enables you to map the output of the parent Nodes to the table identifiers for the SQL snippet. Follow these steps to fill in the table identifier for each connection: <ol style="list-style-type: lower-alpha;"><li value="1"><p>The <span class="UIelement">Input </span>drop-down displays the connection numbers of all the input connections to the <span class="UIelement">SQL</span> Node. If you connected one Node to the <span class="UIelement">SQL</span> Node the <span class="UIelement">Input</span> drop-down displays 1. If you connected two Nodes to the <span class="UIelement">SQL</span> Node, the <span class="UIelement">Input</span> drop-down displays 1 and 2, and so on. </p><p>Select a connection number from the <span class="UIelement">Input</span> drop-down. </p></li><li value="2"><p>Enter a table identifier in the <span class="UIelement">Table Identifier</span> field to refer to the selected connection number. <br />For example, if you selected connection number 1 and entered <code>orders </code>for the table identifier, you can write the SQL snippet as:</p><p><code>select * from orders;</code></p><p>where <code>orders </code>refers to the output of the Node connected with connection number 1.</p></li><li value="3">If you connected multiple Nodes to the SQL Node, click <span class="UIelement">Add input connection</span> to add another table identifier for another connection. </li></ol></li>
                                                    <li value="7">The <span class="UIelement">Drop intermediate results</span> check box is automatically checked to drop the intermediate results if they are not required. Uncheck the check box if you want to see the intermediate results of each step in the expanded query plan.</li>
                                                    <li value="8">
                                                        <p>In the <span class="UIelement">SQL Snippet</span> section, enter the SQL snippet using the table identifiers entered in the <span class="UIelement">Table Identifiers</span> section. </p>
                                                    </li>
                                                    <li value="9">
                                                        <p>Click <span class="UIelement">Save</span>. </p>
                                                        <p>The SQL code snippet is saved in the <span class="UIelement">SQL</span> Node and displays a result set when executed.</p>
                                                    </li>
                                                </ol>
                                                <div class="Note"><span class="label">NOTE:</span>&#160;You can also use parameters in the SQL snippet. However, only upper case parameter names are allowed. For example, you can use <span class="UIelement">TEST </span>but not <span class="UIelement">test </span>parameter. To learn how to use Xcalar defined functions in SQL snippets, see <a href="../../B_SQLMode/f_authoring/sql_xdf.htm" class="MCXref xref" xrefformat="{para}">Working with Xcalar&#160;defined functions</a>.</div>
                                                <h2 class="noPageBreak">Inspecting the query execution plan of a SQL Node</h2>
                                                <p>A query execution plan is an ordered set of steps to run a query. The purpose of the query execution plan is to help database users and administrators debug and fine tune their queries. <span class="GeneralGUIName1">Xcalar Design</span> enables you to inspect the query plan of a <span class="UIelement">SQL</span> Node by right clicking the Node and selecting <span class="UIelement">Inspect</span>. This opens a new tab in the workbook with the query execution plan of the Node.</p>
                                                <h2 class="noPageBreak">Expanding the query execution plan of a SQL Node</h2>
                                                <p><span class="GeneralGUIName1">Xcalar Design</span> enables you to expand the query execution plan of a SQL Node to fine tune each step of the SQL query. For example, a SQL query may have two steps - Synthesize and Filter. If you expand the <span class="UIelement">SQL </span>Node, you see both the Nodes in your dataflow. You can right click on each of them and configure them individually. </p>
                                                <p>To expand the query execution plan for a <span class="UIelement">SQL</span> Node, right click the <span class="UIelement">SQL</span> Node and select <span class="UIelement">Expand</span>. The <span class="UIelement">SQL</span> Node is replaced by its expanded view. You can use the <span class="UIelement">Undo </span>and <span class="UIelement">Redo </span>icons in the top left corner of the <span class="GeneralGUIName1">Xcalar Design</span> to go back to the original <span class="UIelement">SQL</span> Node. However, if the page is refreshed, you lose the ability to <span class="UIelement">Undo </span>and <span class="UIelement">Redo </span>and cannot go back to the original <span class="UIelement">SQL</span> Node from its expanded view.</p>
                                                <p><a href="#top">Go to the top</a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>