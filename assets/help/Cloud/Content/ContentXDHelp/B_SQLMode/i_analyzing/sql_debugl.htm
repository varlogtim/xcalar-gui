<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="SQL Mode|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Debugging your SQL statement</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlobal.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapUtilities.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapXhr.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTextEffects.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSlideshow.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedback.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDefault.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAccessibility.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapHelpSystem.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.MiniToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.SideMenu.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapIndex.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlossary.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapParser.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopic.js" defer="defer">
        </script>
        <script src="../../../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 800px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Home_cloud.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <main id="main" class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="content">
                                        <p><a name="top"></a>
                                        </p>
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="sideContent">
                                                    <div class="clearfix">
                                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                            <div class="button-group-container-left">
                                                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                    <img alt="Navigate previous" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                    <img alt="Navigate next" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <div class="button-separator">
                                                                </div>
                                                                <button class="button needs-pie print-button" title="Print">
                                                                    <img alt="Print" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                    </div>
                                                </div>
                                                <h2 class="noPageBreak"><a name="Debuggin"></a>Debugging your SQL statement</h2>
                                                <p>The <span class="UIelement">Dataflow Mode</span> workspace enables you to further analyze, troubleshoot, identify potential problems, and make edits for improving the query’s performance and fix any issues.</p>
                                                <h3>Opening the SQL dataflow in the Dataflow Mode workspace</h3>
                                                <p>To open the SQL statement in the <span class="UIelement">Dataflow Mode</span> workspace:</p>
                                                <ol>
                                                    <li value="1">From the <span class="UIelement">Preview</span> section, click <span class="UIelement">Debug in dataflow mode</span>.</li>
                                                    <p>The <span class="UIelement">Debug in dataflow mode</span> message opens, asking if you want to continue. Once actions are performed on the SQL dataflow  in the <span class="UIelement">Dataflow Mode</span> workspace the SQL dataflow is no longer optimized.  </p>
                                                    <li value="2">Click <span class="UIelement">Confirm</span>.</li>
                                                </ol>
                                                <p>The SQL statement is now displayed in the  Dataflow Mode canvas as a regular dataflow.</p>
                                                <div class="Note"><span class="label">IMPORTANT:</span> Any changes made to the SQL dataflow in the Dataflow Mode workspace are NOT reflected in the SQL statement. For more information on how to bring your changes back into the query statement, see <a href="sql_dataflow_to_sqlfunct.htm#Converti" class="MCXref xref" xrefformat="{para}">Converting a dataflow into a SQL function</a>.</div>
                                                <h3>Understanding the Dataflow Mode for debugging a SQL&#160;function</h3>
                                                <p>In the Dataflow Mode your SQL&#160;dataflow is now in a configurable state that enables you to make changes whilst troubleshooting. </p>
                                                <p>You may notice some subtle operator differences in the Dataflow Mode workspace from those that are in the <span class="UIelement">Preview</span> section of the SQL Mode workspace. This is because in the SQL Mode workspace,  the SQL dataflow is displayed as an optimized dataflow that does not allow debugging. Whereas, in the Dataflow Mode workspace the dataflow is not optimized, which enables step by step execution and debugging.</p>
                                                <p>For more information on the Dataflow Mode workspace features and Node attributes, see <a href="../../C_XcalarAdvancedMode/AboutXcalarAdvancedMode.htm" class="MCXref xref" xrefformat="{para}">Working in Dataflow Mode</a>.</p>
                                                <div class="Note"><span class="label">TIP:</span> Rename the dataflow as soon as possible, as this will identify the SQL statement as a regular dataflow. You may also want to use a name that identifies the dataflow as a dataflow used for debugging.<br />To rename the SQL dataflow, double-click the tab name and enter a new name. </div>
                                                <h3>Executing the dataflow</h3>
                                                <p>Before you can continue to analyze, debug, or make changes you must first run the dataflow  in the <span class="UIelement">Dataflow Mode</span> workspace.</p>
                                                <p>To execute the dataflow, from the Dataflow Mode's menu bar, click  <span class="UIelement">Execute All</span>.</p>
                                                <p>As each phase of the dataflow runs, a visual representation of the percentage completed is displayed and the performance results (Node Information) appear above each of the operator Nodes.</p>
                                                <p>Once the execution of the dataflow is completed, you can now:</p>
                                                <ul>
                                                    <li value="1">View more in-depth configuration details about the operator. </li>
                                                    <p>To view more details about the operator or other Node components, right-click the Node and from the floating menu, select <span class="UIelement">Configure</span>. The configuration details are displayed in the Node panel.</p>
                                                </ul>
                                                <ul>
                                                    <li value="1">To make changes to the operator or other Node components, in the Node component panel, click <span class="UIelement">edit</span>. </li>
                                                    <p>For more information on how to configure the Node operators and other Node components, see <a href="../../C_XcalarAdvancedMode/AboutXcalarAdvancedMode.htm" class="MCXref xref" xrefformat="{para}">Working in Dataflow Mode</a>.</p>
                                                </ul>
                                                <p>Any changes made to the dataflow in the Dataflow Mode are NOT reflected in the SQL statement. When you are satisfied with your changes, do one of the following:</p>
                                                <ul>
                                                    <li value="1">Keep the dataflow as is and run it as an optimized dataflow. For more information, see <a href="../../C_XcalarAdvancedMode/A_Dataflows/UnderstandDfOptimization.htm" class="MCXref xref" xrefformat="{para}">Understanding a dataflow with optimization</a>.</li>
                                                    <li value="2">Manually add the changes back into the SQL statement's code from the <span class="UIelement">SQL Editor</span>.</li>
                                                    <li value="3">Create an SQL function from the dataflow and include it as part of your SQL query or as a standalone query.</li>
                                                    <p> For more information, see <a href="sql_dataflow_to_sqlfunct.htm#Converti" class="MCXref xref" xrefformat="{para}">Converting a dataflow into a SQL function</a>.</p>
                                                </ul>
                                                <h3>Troubleshooting and performance improvement tips</h3>
                                                <p>For most cases, simple trial and error can be used to determine which changes to implement and which to ignore.  Ensure that you record the changes you create as these maybe required later if you manually update your SQL&#160;statement.</p>
                                                <p>Potential problems and query performance can be improved by:</p>
                                                <ul>
                                                    <li value="1">Checking the <span class="UIelement">Time</span> value of each operation of the query and looking for cases where the run time exceeds your expectations. Focus on the operations that took the longest.</li>
                                                    <li value="2">Checking the <span class="UIelement">Skew</span> value where the run time exceeds your expectations. </li>
                                                    <p>Data skew can severely downgrade the performance of queries. High skew indicates an uneven distribution of data across cluster nodes. The more evenly data is distributed, the faster the operations run on the cluster. Operations that use JOINS, and WHERE and HAVING clauses may require changing the code to selecting columns with the most evenly distributed values. For more information on how to view the distribution of data from your query on the <span class="GeneralProductName3">Xcalar</span> cluster, see <a href="sql_skew_distribut.htm#Displayi" class="MCXref xref" xrefformat="{para}">Displaying the distribution of the result set on the Xcalar cluster</a>.</p>
                                                    <li value="3">Checking the schema of each table and verifying that columns contain the same data types.</li>
                                                    <li value="4">Back tracking when you see an issue, such as checking the first instance when the row count was at <span class="UIelement">0</span> (zero).</li>
                                                    <li value="5">Reviewing and modifying the queries in the statement.</li>
                                                    <p>As well as testing JOINS, check for NULL values in your data and verify that these are treated in the first instance.</p>
                                                </ul>
                                                <p><a href="#top">Go to the top</a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>