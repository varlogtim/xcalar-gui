<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="SQL Mode|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Converting a dataflow into a SQL function</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlobal.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapUtilities.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapXhr.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTextEffects.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSlideshow.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedback.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDefault.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAccessibility.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapHelpSystem.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.MiniToc.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.SideMenu.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapIndex.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlossary.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapParser.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopic.js" defer="defer">
        </script>
        <script src="../../../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 800px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Home_cloud.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <main id="main" class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="content">
                                        <p><a name="top"></a>
                                        </p>
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="sideContent">
                                                    <div class="clearfix">
                                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                            <div class="button-group-container-left">
                                                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                    <img alt="Navigate previous" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                    <img alt="Navigate next" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <div class="button-separator">
                                                                </div>
                                                                <button class="button needs-pie print-button" title="Print">
                                                                    <img alt="Print" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                    </div>
                                                </div>
                                                <h2 class="noPageBreak"><a name="Converti"></a>Converting a dataflow into a SQL function</h2>
                                                <p>This topic discusses how to convert a dataflow from the Dataflow Mode into a SQL function that can be used in your SQL statements.</p>
                                                <p>After debugging, <span class="GeneralGUIName1">Xcalar Design</span> provides the following options for bringing your changes back into your SQL query:</p>
                                                <ul>
                                                    <li value="1">Manually adding your changes as SQL code into the SQL query statement.</li>
                                                    <li value="2">Creating a SQL function from the dataflow and incorporating it into the SQL query statement or as a standalone statement.</li>
                                                </ul>
                                                <p>To convert a dataflow into a SQL function:</p>
                                                <ol>
                                                    <li value="1">Verify that you are in the Dataflow Mode workspace and that your dataflow is visible in its dataflow canvas.</li>
                                                    <li value="2">From the Tab bar, click the <span class="UIelement">+ New SQL function</span> button.</li>
                                                    <p>The New SQL Function window appears.</p>
                                                    <li value="3">In the <span class="UIelement">Number of parameters</span> field, enter the number of <span class="UIelement">Input</span> Nodes you require, which is the same as the number of tables in your SQL statement dataflow.</li>
                                                    <li value="4">Click <span class="UIelement">Confirm</span>.</li>
                                                    <p>The SQL function canvas opens containing the number of <span class="UIelement">Input</span> Nodes you requested and one <span class="UIelement">Output</span> Node.</p>
                                                    <li value="5">Double-click the <span class="UIelement">SQL function</span> tab and enter a name for this SQL function. For more information on the SQL Function naming conventions, see <a href="../../E_Reference/naming_rules.htm#SQL" class="MCXref xref" xrefformat="{para}">SQL code snippet</a>.</li>
                                                    <li value="6">From the Tab menu, click the tab that contains your dataflow.</li>
                                                    <p>The dataflow canvas opens containing your SQL statement dataflow.</p>
                                                    <li value="7">In the dataflow canvas, right-click and from the floating menu, select <span class="UIelement">Select All</span>.</li>
                                                    <li value="8">Copy the Nodes by pressing <span class="UIelement">Ctrl +c</span>, or your operating system's equivalent keyboard shortcut.</li>
                                                    <li value="9">From the Tab menu, click the tab that contains the new SQL function.</li>
                                                    <p>The SQL function canvas displays.</p>
                                                    <div class="Note"><span class="label">TIP:</span> The SQL function tab contains the <span class="UIelement">New SQL&#160;function</span> icon <img src="../../../Resources/Images/XD_assets/xd_sqlfunction_icon.png" /> .</div>
                                                    <li value="10">Press <span class="UIelement">Ctrl + v</span>, or your operating system's equivalent keyboard shortcut, which pastes the Nodes that you copied from the dataflow canvas into the SQL function canvas.</li>
                                                    <div class="Note"><span class="label">NOTE:</span> The SQL function feature of the Dataflow Mode has its own set of Node components. Therefore, not all the Nodes from the SQL dataflow are pasted into the SQL function canvas, such as the Input and Output Nodes. For Node components that were not pasted into the SQL function canvas, from the SQL&#160;Function toolbar, drag and drop the Nodes you require  into the SQL&#160;function canvas and configure. For more information on how to configure Node's, see <a href="../../C_XcalarAdvancedMode/B_Operations/AboutOperations.htm" class="MCXref xref" xrefformat="{para}">Understanding the operation Nodes</a>.</div>
                                                    <li value="11">For each <span class="UIelement">Input</span> Node, do the following:</li>
                                                    <ol style="list-style-type: lower-alpha;">
                                                        <li value="1">Select the <span class="UIelement">Input</span> Node, right-click and select <span class="UIelement">Configure</span>.</li>
                                                        <li value="2">In the same order as each table in the dataflow, from the <span class="UIelement">SQL Function Input</span> panel, click in the <span class="UIelement">Source Table (For testing only)</span> field and select a table .</li>
                                                        <li value="3">From the <span class="UIelement">Column Schema</span> section, verify the schema columns and data types.</li>
                                                        <li value="4">Click <span class="UIelement">Save</span>.</li>
                                                        <div class="Note"><span class="label">NOTE:</span> If  the <span class="UIelement">Auto preview the results after execution</span> setting is enabled, the table is displayed in the Dataflow Mode's previewing section. You can enable the <span class="UIelement">Auto preview the results after execution</span> setting from the <span class="UIelement">Dataflow Settings</span> modal window by clicking the <span class="UIelement">Dataflow settings</span> icon <img src="../../../Resources/Images/XD_assets/xd_dataflow_settings_icon.png" /> in the <span class="GeneralGUIName1">Xcalar Design</span> menu bar.</div>
                                                    </ol>
                                                    <li value="12">Connect the <span class="UIelement">Input</span> and <span class="UIelement">Output</span> Nodes to the operator Nodes in the same order as the dataflow by clicking one of the Node's anchors and dragging your cursor to the connecting Node.</li>
                                                    <li value="13">(Optional) As you connect each Node, right-click and select <span class="UIelement">Execute</span>, which tests each phase of the SQL function.</li>
                                                    <li value="14">Configure the <span class="UIelement">Output</span> Node by right-clicking the Node and selecting <span class="UIelement">Execute</span>.</li>
                                                </ol>
                                                <p>The next step is to use the SQL function in an SQL statement. For more information, see <a href="../f_authoring/sql_functions.htm#Invoking" class="MCXref xref" xrefformat="{para}">Invoking a SQL function in a SQL statement</a>.</p>
                                                <p><a href="#top">Go to the top</a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>