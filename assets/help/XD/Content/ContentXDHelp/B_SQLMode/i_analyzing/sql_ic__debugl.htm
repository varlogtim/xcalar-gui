<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="SQL Mode|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Debugging your SQL statement</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlobal.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDom.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapUtilities.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapXhr.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTextEffects.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSlideshow.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedback.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDefault.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapHelpSystem.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.MiniToc.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.SideMenu.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapIndex.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlossary.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapParser.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopic.js">
        </script>
        <script src="file://vmware-host/Shared Folders/florencechan On My Mac/xcalar-docs/FlareTemplates/Template-Sept2018/Content/Scripts/expandSideNavTopics.js">
        </script>
        <script src="../../../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 800px)" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../HomeXDHelp.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <div class="content">
                                    <div id="contentBody">
                                        <div class="row collapse">
                                            <div class="sideContent">
                                                <div class="clearfix">
                                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                        <div class="button-group-container-left">
                                                            <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                            </button>
                                                            <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                            </button>
                                                            <div class="button-separator">
                                                            </div>
                                                            <button class="button needs-pie print-button" title="Print">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                            <h2 class="noPageBreak"><a name="Debuggin"></a>Debugging your SQL statement</h2>
                                            <p>The Advanced Mode enables you to further analyze, troubleshoot, identify potential problems, and make edits for improving the query’s performance and fix any issues.</p>
                                            <h3>Opening the SQL dataflow in Advanced Mode</h3>
                                            <p>To open the SQL statement in the Advanced Mode:</p>
                                            <ol>
                                                <li value="1">From the <span class="UIelement">Previewing</span> section, click <span class="UIelement">Edit in advanced mode</span>.</li>
                                                <p>The DEBUG IN ADVANCED MODE message opens, explaining that the SQL statement dataflow in Advance Mode will no longer be optimized and asking if you want to continue.</p>
                                                <li value="2">Click <span class="UIelement">Confirm</span>.</li>
                                            </ol>
                                            <p>The SQL statement is now displayed in the  Advanced Mode canvas as a regular dataflow.</p>
                                            <div class="Note"><span class="label">IMPORTANT:</span> Any changes made to the SQL statement dataflow in the Advanced Mode are NOT reflected in the SQL statement. For more information on how to bring your changes back into the query statement, see <a href="sql_id_dataflow_to_sqlfunct.htm#Converti" class="MCXref xref" xrefformat="{para}">Converting a dataflow into a SQL function</a>.</div>
                                            <h3>Understanding the Advanced Mode for debugging a SQL&#160;function</h3>
                                            <p>In the Advanced Mode your SQL&#160;dataflow is now in a configurable state that enables you to make changes whilst troubleshooting. </p>
                                            <p>You may notice some subtle operator differences  from those that appear in the <span class="UIelement">Previewing</span> section of the SQL Workspace. This is because in the <span class="UIelement">Previewing</span> section  the SQL statement is displayed as an optimized dataflow that does not allow debugging, whereas in the Advanced Mode the dataflow is not optimized to enable step by step execution and debugging.</p>
                                            <p>For more information on the Advanced Mode workspace features and Node attributes, see <span style="color: #ff0000;">LINK to Advanced Mode ……</span></p>
                                            <div class="Note"><span class="label">TIP:</span> Rename the dataflow as soon as possible, as this will identify the SQL statement as a regular dataflow. You may also want to use a name that identifies the dataflow as a dataflow used for debugging.<br />To rename the SQL dataflow, double-click the tab name and enter a new name. </div>
                                            <h3>Executing the dataflow</h3>
                                            <p>Before you can continue to analyze, debug, or make changes you must first run the dataflow  in the Advance Mode.</p>
                                            <p>To execute the dataflow, from the Advanced Mode's menu bar, click  <span class="UIelement">Execute All</span>.</p>
                                            <p>As each phase of the dataflow runs a visual representation of the percentage completed is displayed and the performance results (Node Information) appear above each operator Node.</p>
                                            <p>Once the execution of the dataflow is completed, you can now:</p>
                                            <ul>
                                                <li value="1">View more in-depth configuration details about the operator. </li>
                                                <p>To view more details about the operator or other Node component, right-click the Node and from the floating menu, select <span class="UIelement">Configure</span>. The configuration details are displayed in the Node panel.</p>
                                            </ul>
                                            <ul>
                                                <li value="1">To make changes to the operator or other Node component, in the Node component panel, click <span class="UIelement">edit</span>. </li>
                                                <p>For more information on how to configure the Node operators and other Node components, see <span style="color: #ff0000;">LINK ADVANCED MODE</span></p>
                                            </ul>
                                            <p>Any changes made to the dataflow in the Advanced Mode are NOT reflected in the SQL statement. When you are satisfied with your changes, do one of the following:</p>
                                            <ul>
                                                <li value="1">Keep the dataflow as is and run it as an optimized dataflow. For more information, see <a href="../../C_XcalarAdvancedMode/A_Dataflows/B_UnderstandDfOptimization.htm" class="MCXref xref" xrefformat="{para}">Understanding dataflow execution</a>.</li>
                                                <li value="2">Manually add the changes back into the SQL statement's code from the <span class="UIelement">SQL Editor</span>.</li>
                                                <li value="3">Create an SQL function from the dataflow and include it as part of your SQL query or as a standalone query.</li>
                                                <p> For more information, see <a href="sql_id_dataflow_to_sqlfunct.htm#Converti" class="MCXref xref" xrefformat="{para}">Converting a dataflow into a SQL function</a>.</p>
                                            </ul>
                                            <h3>Troubleshooting and performance improvement tips</h3>
                                            <p>For most cases, simple trial and error can be used to determine which changes to implement and which to ignore.  Ensure that you record the changes you create as these maybe required later if you manually update your SQL&#160;statement.</p>
                                            <p>Potential problems and query performance can be improved by:</p>
                                            <ul>
                                                <li value="1">Checking the <span class="UIelement">Time</span> value of each operation of the query and looking for cases where the run time exceeds your expectations. Focus on the operations that took the longest.</li>
                                                <li value="2">Checking the <span class="UIelement">Skew</span> value where the run time exceeds your expectations. </li>
                                                <p>Data skew can severely downgrade the performance of queries. High skew indicates an uneven distribution of data across cluster nodes. The more evenly data is distributed, the faster the operations run on the cluster. Operations that use JOINS, and WHERE and HAVING clauses may require changing the code to selecting columns with the most evenly distributed values. For more information on how to view the distribution of data from your query on the <span class="GeneralProductName3">Xcalar</span> cluster, see <a href="sql_ie_skew_distribut.htm#Displayi" class="MCXref xref" xrefformat="{para}">Displaying the distribution of the result set on the Xcalar cluster</a>.</p>
                                                <li value="3">Checking the schema of each table and verifying that columns contain the same data types.</li>
                                                <li value="4">Back tracking when you see an issue, such as checking the first instance when the row count was at <span class="UIelement">0</span> (zero).</li>
                                                <li value="5">Reviewing and modifying the queries in the statement.</li>
                                                <p>As well as testing JOINS, check for NULL values in your data and verify that these are treated in the first instance.</p>
                                            </ul>
                                            <p><a href="#Top">Go to top</a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>