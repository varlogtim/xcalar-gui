<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Understanding the Business Rules Inventory Extension</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../Resources/TableStyles/SimpleTable.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapGlobal.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapDom.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapUtilities.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapXhr.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapTextEffects.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapSlideshow.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapFeedback.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapDefault.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAccessibility.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapHelpSystem.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapToc.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapToc.MiniToc.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapToc.SideMenu.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapIndex.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapGlossary.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapParser.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapSearch.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapTopic.js" defer="defer">
        </script>
        <script src="../../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 800px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../Home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <main id="main" class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="content">
                                        <p><a name="top"></a>
                                        </p>
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="sideContent">
                                                    <div class="clearfix">
                                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                            <div class="button-group-container-left">
                                                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                    <img alt="Navigate previous" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                    <img alt="Navigate next" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                                <div class="button-separator">
                                                                </div>
                                                                <button class="button needs-pie print-button" title="Print">
                                                                    <img alt="Print" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                    </div>
                                                </div>
                                                <h1>Understanding the Business Rules Inventory Extension</h1>
                                                <p>Before building a dataflow or a query, you might want to determine whether all records in your table comply with the business rules set forth by your organization. A business rule is a statement specifying the constraint that a record must not violate for the record to be considered valid. For example, for analyzing flight information, your organization might have a business rule stating that data collected on Sunday is not valid, or that a carrier code from a defunct airline must not be analyzed. A business rule inventory is a collection of business rules.</p>
                                                <p>After separating out the records that violate the business rules, you can focus your effort on records that are compliant. Alternatively, you can choose to fix the errors in the records that violate the rules.</p>
                                                <p>The Business Rule Inventory (BRI) extension creates two user-defined functions (UDFs) for you to use as Map functions. One UDF identifies the records in a table that violate the business rules defined in a data file. Another UDF displays a description for each violation according to the rule specifications. The latter helps you determine what further actions should be taken for the violations.</p>
                                                <p>This document describes how to use the BRI extension.</p>
                                                <p>The major steps for using a business rule inventory against your data are as follows:</p>
                                                <ol>
                                                    <li value="1">Create a BRI data file that specifies the business rules.</li>
                                                    <li value="2">Create a table in <span class="GeneralGUIName1">Xcalar Design</span> from the BRI data file.</li>
                                                    <li value="3">Execute the BRI extension to create two UDFs.</li>
                                                    <li value="4">Apply the first UDF to a target table to locate the rule violations.</li>
                                                    <li value="5">(Optional) Apply the second UDF to obtain a description of each violated rule.</li>
                                                    <li value="6">Derive additional information from the UDF results.</li>
                                                </ol>
                                                <h2 class="noPageBreak">Creating a Business Rule Inventory data file</h2>
                                                <p>Before invoking the BRI extension, create a file that defines the business rules. Because this file will be used by <span class="GeneralGUIName1">Xcalar Design</span> to create a table, save the file in a format that <span class="GeneralGUIName1">Xcalar Design</span> can process, such as CSV or Excel.</p>
                                                <p>This file must contain the fields shown in the following <span class="UIelement">Business rules table</span>. Enter the field names in the first row. Then enter one business rule for each row in the file.</p>
                                                <div class="Note"><span class="label">IMPORTANT:</span> It is important that you use the exact field  names, which are not case-sensitive.</div>
                                                <table style="mc-table-style: url('../../Resources/TableStyles/SimpleTable.css');margin-left: 0;margin-right: auto;" class="TableStyle-SimpleTable" cellspacing="0">
                                                    <caption data-mc-autonum="Table 1 "><span class="autonumber"><span>Table 1 </span></span>Business rules table</caption>
                                                    <col class="TableStyle-SimpleTable-Column-Column1" />
                                                    <col class="TableStyle-SimpleTable-Column-Column2" />
                                                    <thead>
                                                        <tr class="TableStyle-SimpleTable-Head-Header1">
                                                            <th class="TableStyle-SimpleTable-HeadE-Column1-Header1">Field Name</th>
                                                            <th class="TableStyle-SimpleTable-HeadD-Column2-Header1">Description</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-SimpleTable-Body-Body1">
                                                            <td class="TableStyle-SimpleTable-BodyE-Column1-Body1">
                                                                <p class="tableParagraph">Argument Names	</p>
                                                            </td>
                                                            <td class="TableStyle-SimpleTable-BodyD-Column2-Body1">
                                                                <p>The name of the argument used in the rule string, which will be replaced by the argument passed to the UDF when the UDF is executed.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-SimpleTable-Body-Body2">
                                                            <td class="TableStyle-SimpleTable-BodyE-Column1-Body2">Rule Description	</td>
                                                            <td class="TableStyle-SimpleTable-BodyD-Column2-Body2">	A comment explaining the purpose of the rule (for example, "A person's age cannot be a negative number.")</td>
                                                        </tr>
                                                        <tr class="TableStyle-SimpleTable-Body-Body1">
                                                            <td class="TableStyle-SimpleTable-BodyE-Column1-Body1">Rule ID<![CDATA[	]]></td>
                                                            <td class="TableStyle-SimpleTable-BodyD-Column2-Body1">An identification number that references the rule (for example, R00001).</td>
                                                        </tr>
                                                        <tr class="TableStyle-SimpleTable-Body-Body2">
                                                            <td class="TableStyle-SimpleTable-BodyE-Column1-Body2">Rule String</td>
                                                            <td class="TableStyle-SimpleTable-BodyD-Column2-Body2">
                                                                <p>A Python expression that specifies the rule. You must use a syntax suitable for a string. For example, the following expression evaluates to True if the DayOfWeek argument is not equal to "7":</p>
                                                                <p>DayOfWeek != "7"</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-SimpleTable-Body-Body1">
                                                            <td class="TableStyle-SimpleTable-BodyB-Column1-Body1">Rule Category	</td>
                                                            <td class="TableStyle-SimpleTable-BodyA-Column2-Body1">
                                                                <p>The category to which a group of rules belong (for example, a category named Currency is for all the rules that are related to currency).</p>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <p>The following screenshot is an example of a BRI data file specifying the business rules for airlines data:</p>
                                                <p>
                                                    <img src="../../Resources/Images/XD_screenshots/busessRules.png" />
                                                </p>
                                                <h2 class="noPageBreak"><a name="Creating"></a>Creating a Business Rules Inventory table in <span class="GeneralGUIName1">Xcalar Design</span></h2>
                                                <p>After you are finished with all the rules, use <span class="GeneralGUIName1">Xcalar Design</span> to import the BRI data file to create a table. In the Import Data Source window, follow these steps:</p>
                                                <ol>
                                                    <li value="1">Select the BRI data file and click Next.</li>
                                                    <li value="2">Select <span class="UIelement">Promote the first row as header</span> so that the resulting BRI table has the Rule Id, Rule Category, Rule Description, Rule String, and Argument Names as column headers.</li>
                                                    <li value="3">If the BRI data file is a CSV file, you must leave the <span class="UIelement">Quoting Character</span> field empty.</li>
                                                    <li value="4">
                                                        <p>Click <span class="UIelement">Create Table</span>. </p>
                                                        <p>The BRI table is created and displayed with all the columns from the BRI data file.</p>
                                                    </li>
                                                </ol>
                                                <h2 class="noPageBreak">Running the Business Rules Inventory extension</h2>
                                                <p>Follow these steps to create the business rules inventory UDF:</p>
                                                <ol>
                                                    <li value="1">In your dataflow, add a <span class="UIelement">Table</span> Node and configure it to use the BRI table as described in <a href="#Creating" class="MCXref xref">Creating a Business Rules Inventory table in Xcalar Design</a>.</li>
                                                    <li value="2">Add an <span class="UIelement">Extension</span> Node to the dataflow and connect the output of <span class="UIelement">Table</span> Node created in previous step to the <span class="UIelement">Extension</span> Node.</li>
                                                    <li value="3">Right click the <span class="UIelement">Extension</span> Node and select <span class="UIelement">Configure</span>.</li>
                                                    <li value="4">In the <span class="UIelement">Extension Name</span> field, select BizRules.</li>
                                                    <li value="5">In the <span class="UIelement">Function Name</span> field, select Business Rules Inventory.</li>
                                                    <li value="6">In the <span class="UIelement">BRI table</span> field, select Input #1.</li>
                                                    <li value="7">In the <span class="UIelement">Module Name</span>, enter a module name that will contain the UDF. Use a descriptive module name, which enables you to keep track of multiple modules containing rules for different purposes. Including the user name in the module name also helps other users to identify the creator of the UDF.</li>
                                                    <li value="8">
                                                        <p>Click <span class="UIelement">Save</span>. </p>
                                                        <p>A message appears to show that the BRI extension successfully created the business rules inventory UDF in the cluster. </p>
                                                    </li>
                                                </ol>
                                                <p>Now the UDF is ready for you to use on any target table in your workbook to check for business rule violations.</p>
                                                <h2 class="noPageBreak">Applying the business rules inventory UDF</h2>
                                                <p>To determine whether records in a particular table violate any rules specified in a BRI table, apply the business rules inventory UDF as a Map function as follows:</p>
                                                <ol>
                                                    <li value="1">From a result set column drop-down, select <span class="UIelement">Map</span>.</li>
                                                    <li value="2">In the <span class="UIelement">Map</span> configuration panel, select user-defined as the category, and then select the business rules inventory UDF (for example, bri_user1:business_rules_inventory).</li>
                                                    <li value="3">For each column that you want to test against a business rule, enter the column name to map it to the argument name in the BRI table. For example, suppose an argument name in the BRI table is DayOfWeek, and a rule is specified to determine whether its value is equal to 7. You can map the column name DayOfWeek_integer to it. This means that the rule specified for the DayOfWeek argument in the BRI table will be applied to the column named DayOfWeek_integer.</li>
                                                    <li value="4">In the <span class="UIelement">New Resultant Column Name</span> field, accept the default name or enter a new name for the resultant column. This column contains the resultant values created by the UDF, which indicate whether a rule is violated.</li>
                                                    <li value="5">Click <span class="UIelement">Save</span>.</li>
                                                </ol>
                                                <p>The UDF creates a resultant column. For each row in this column, the results for applying all the rules are returned in a comma-delimited string. The results for rule 1 will be the first value in the string, the second at the next position, and so on. A 0 means that the row is valid. A violation is denoted with the Rule Id instead of a 0.</p>
                                                <h2 class="noPageBreak">Applying the convert from rule ID UDF</h2>
                                                <p>If a row shows a rule violation, you can see the Rule Id in the column created by the business rules inventory UDF. However, it would be more useful if a description of the violated rule is displayed. Follow these steps to create another column to display information about the business rules:</p>
                                                <ol>
                                                    <li value="1">Right click the resultant column created by the business rules inventory UDF and select <span class="UIelement">Map</span>.</li>
                                                    <li value="2">In the <span class="UIelement">Map</span> panel, select user-defined as the category, and then select the convert from rule ID UDF (for example, bri_user1:convertFromRuleId).</li>
                                                    <li value="3">In the Rules field, make sure that the column is the one containing the results from the business rules inventory UDF.</li>
                                                    <li value="4">
                                                        <p>In the <span class="UIelement">New Resultant Column Name</span> field, accept the default name or enter a new name for the resultant column. This column contains the descriptions corresponding to the rules that are violated.</p>
                                                        <p>For example, in a table for airlines data, if a value in the DayOfWeek_integer is 7, and a rule specifies that day 7 is invalid, the following description is displayed:</p>
                                                        <p><code>Planes don't fly on Sunday (day 7).</code>
                                                        </p>
                                                        <p>If more than one rule is violated, the descriptions for the corresponding rules are separated by a comma. For example:</p>
                                                        <p><code>Planes don't fly on Sunday (day 7).,The carrier code ZZ is not valid.</code>
                                                        </p>
                                                    </li>
                                                </ol>
                                                <p><a href="#top">Go to the top</a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>