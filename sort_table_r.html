<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Xcalar-Sort</title>
<link href="cat_photoshop.css" rel="stylesheet" type="text/css">
<style type="text/css">
body,td,th {
	font-family: "Arial Century Schoolbook L", "Times New Roman", serif;
}
body {
	background-color: #f5f5f5;
}
</style>
<script src="js/script.js"></script>
<script src="js/thrift.js" type="text/javascript"></script>
<script src="js/Status_types.js" type="text/javascript"></script>
<script src="js/libapis_common_types.js" type="text/javascript"></script>
<script src="js/XcalarApiService.js" type="text/javascript"></script>
<script src="js/XcalarThrift.js" type="text/javascript"></script>
<script>
    var tableName = XcalarGetTables().tables[0].tableName;
    var numEntries = 12;
    var resultSetPtr = XcalarGetTableStartPointer(tableName);
    
    function getNextPage() {
        console.log("Hello");
        if (resultSetPtr == null) {
            return;
            // Reached the end
        }

        $("#autoGenTable").find("tr:gt(0)").remove();
        var tableOfEntries = XcalarGetNextPage(resultSetPtr, numEntries);

        if (tableOfEntries.numRecords < numEntries) {
            // This is the last iteration
            // Time to free the handle
            // XXX: Function call to free handle?
            resultSetPtr = null;
        }
        for (var i = 0; i<Math.min(numEntries, tableOfEntries.numRecords); i++) {
            var key = tableOfEntries.records[i].key;
            var value = tableOfEntries.records[i].value;
            generateRowWithAutoIndex2(key, value);
        }
    }
</script>
</head>

<body topmargin="0" leftmargin="0">
<table width="90%" border="0" class="stbg" id="autoGenTable" cellspacing="1px" cellpadding="2px">
  <tr>
    <td width="3%" height="17" class="table_title_bg" id="headCol1">
        <strong>ID</strong>
    </td>
    <td width="auto" height="17" class="table_title_bg" id="headCol2">
        <strong>Key</strong>
    </td>
    <td width="auto" height="17" class="table_title_bg" id="headCol3">
        <strong>Value</strong>
    </td>
  </tr>
  <script>
    getNextPage();
  </script>
</table>
<div style="position: absolute; left: 1253px; top: 355px;">
<input type="button" class="tempButton bigButton" value="Next Page"
  onclick="getNextPage();"/>
</div>
</body>
</html>
